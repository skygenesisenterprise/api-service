# Sky Genesis Enterprise API Configuration
# Copy this file to .env and update values for your environment
#
# ⚠️  SECURITY WARNING:
# Never commit real secrets, passwords, or tokens to version control.
# Use Vault for production secrets and strong, unique values for all credentials.
# This file contains EXAMPLE values only.

# Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=your_db_name
DB_USER=your_db_user
DB_PASSWORD=your_db_password

# Vault Configuration
VAULT_ADDR=https://vault.skygenesisenterprise.com
VAULT_TOKEN=your_vault_token
VAULT_ROLE_ID=your_vault_role_id
VAULT_SECRET_ID=your_vault_secret_id

# Keycloak Configuration
KEYCLOAK_URL=https://keycloak.skygenesisenterprise.com
KEYCLOAK_REALM=skygenesisenterprise
KEYCLOAK_CLIENT_ID=api-client

# JWT Configuration
JWT_SECRET=your_jwt_secret_key

# API Configuration
PORT=8080
API_HOST=0.0.0.0

# Mail Module Configuration
# Stalwart Mail Server Integration

# Routing Mode: official|tenant|region
STALWART_ROUTING_MODE=official

# Default region for region-based routing
STALWART_DEFAULT_REGION=us-east-1

# Stalwart Connection Settings
STALWART_URL=https://stalwart.skygenesisenterprise.com
STALWART_JMAP_PATH=/jmap
STALWART_TIMEOUT_SECONDS=30

# mTLS Certificate Paths (for development - in production, use Vault)
STALWART_CLIENT_CERT=/etc/sge/certs/stalwart.crt
STALWART_CLIENT_KEY=/etc/sge/certs/stalwart.key
STALWART_CA_CERT=/etc/sge/certs/ca.crt

# Performance Tuning
STALWART_MAX_CONNECTIONS=100
STALWART_CONNECT_TIMEOUT=5
STALWART_REQUEST_TIMEOUT=30

# Mail Policies
MAIL_RATE_LIMIT=100/minute
MAIL_ATTACHMENT_MAX_SIZE=10MB
MAIL_RETENTION_DAYS=365

# Mail Server URLs (for different routing modes)
# Official server (default)
# STALWART_OFFICIAL_URL=https://stalwart.skygenesisenterprise.com

# Session Management
SESSION_TTL_SECONDS=604800
SESSION_COOKIE_NAME=sky_genesis_session
SESSION_COOKIE_DOMAIN=skygenesisenterprise.com
SESSION_COOKIE_SECURE=true

# Application Ecosystem
# Aether Search
AETHER_SEARCH_URL=https://search.skygenesisenterprise.com
AETHER_SEARCH_PERMISSIONS=search:read

# Aether Mail
AETHER_MAIL_URL=https://mail.skygenesisenterprise.com
AETHER_MAIL_PERMISSIONS=mail:read,mail:write

# Aether Drive
AETHER_DRIVE_URL=https://drive.skygenesisenterprise.com
AETHER_DRIVE_PERMISSIONS=drive:read,drive:write

# Aether Calendar
AETHER_CALENDAR_URL=https://calendar.skygenesisenterprise.com
AETHER_CALENDAR_PERMISSIONS=calendar:read,calendar:write

# Two-Factor Authentication
# Applications requiring 2FA (set to 'true' to enforce)
AETHER_MAIL_REQUIRES_2FA=true
AETHER_DRIVE_REQUIRES_2FA=true
AETHER_CALENDAR_REQUIRES_2FA=false

# 2FA Configuration
TOTP_ISSUER=Sky Genesis Enterprise
TOTP_TIME_STEP=30
VERIFICATION_CODE_LENGTH=6
RECOVERY_CODES_COUNT=10

# SMS/Email providers (for production)
# SMS_PROVIDER=twilio
# SMS_ACCOUNT_SID=your_twilio_sid
# SMS_AUTH_TOKEN=your_twilio_token
# SMS_FROM_NUMBER=+1234567890

# EMAIL_PROVIDER=sendgrid
# EMAIL_API_KEY=your_sendgrid_key
# EMAIL_FROM=noreply@skygenesisenterprise.com

# Tenant-specific servers (uncomment and configure for tenant-based routing)
# STALWART_TENANT_ACME_URL=https://stalwart-tenant-acme.sge.internal
# STALWART_TENANT_GLOBEX_URL=https://stalwart-tenant-globex.sge.internal

# Regional servers (uncomment and configure for region-based routing)
# STALWART_REGION_US_EAST_1_URL=https://stalwart-us-east.sge.internal
# STALWART_REGION_EU_WEST_1_URL=https://stalwart-eu-west.sge.internal
# STALWART_REGION_AP_SOUTHEAST_1_URL=https://stalwart-ap-southeast.sge.internal

# Development and Testing Configuration
# Uncomment for local development with mock services

# Enable development mode (disables some security checks)
# SGE_DEV_MODE=true

# Mock external services (for testing without real Vault/Keycloak)
# SGE_MOCK_SERVICES=true

# Log level: error|warn|info|debug|trace
RUST_LOG=info

# Enable request/response logging
# SGE_REQUEST_LOGGING=true

# Test user credentials (for development only)
# TEST_USER_EMAIL=test@example.com
# TEST_USER_PASSWORD=testpassword

# =============================================================================
# DEPLOYMENT EXAMPLES
# =============================================================================

# Example 1: Single Server (Official) - Default Configuration
# STALWART_ROUTING_MODE=official
# (No additional configuration needed - uses official SGE server)

# Example 2: Multi-Tenant Deployment
# STALWART_ROUTING_MODE=tenant
# Configure tenant-specific servers in Vault:
# secret/stalwart/tenants/acme/server_url = "https://stalwart-acme.sge.internal"
# secret/stalwart/tenants/globex/server_url = "https://stalwart-globex.sge.internal"

# Example 3: Geographic Distribution
# STALWART_ROUTING_MODE=region
# STALWART_DEFAULT_REGION=us-east-1
# Configure regional servers in Vault:
# secret/stalwart/regions/us-east-1/server_url = "https://stalwart-us-east.sge.internal"
# secret/stalwart/regions/eu-west-1/server_url = "https://stalwart-eu-west.sge.internal"

# Example 4: Local Development with Docker
# VAULT_ADDR=http://localhost:8200
# KEYCLOAK_URL=http://localhost:8080
# STALWART_ROUTING_MODE=official
# SGE_DEV_MODE=true
# SGE_MOCK_SERVICES=true

# =============================================================================
# SECURITY AND COMPLIANCE
# =============================================================================

# Security Headers
# SGE_SECURITY_HEADERS=true

# CORS Configuration
# SGE_CORS_ORIGINS=https://app.skygenesisenterprise.com,https://admin.skygenesisenterprise.com

# Rate Limiting
# SGE_RATE_LIMIT_ENABLED=true
# SGE_RATE_LIMIT_REQUESTS_PER_MINUTE=1000

# Audit Logging
# SGE_AUDIT_LOG_ENABLED=true
# SGE_AUDIT_LOG_LEVEL=detailed

# Data Encryption
# SGE_ENCRYPT_SENSITIVE_DATA=true

# GDPR Compliance
# SGE_GDPR_MODE=true
# SGE_DATA_RETENTION_DAYS=2555  # 7 years

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================

# Metrics Collection
# SGE_METRICS_ENABLED=true
# SGE_METRICS_ENDPOINT=/metrics

# Health Checks
# SGE_HEALTH_CHECK_ENABLED=true
# SGE_HEALTH_CHECK_ENDPOINT=/health

# Distributed Tracing
# SGE_TRACING_ENABLED=true
# SGE_TRACING_JAEGER_ENDPOINT=http://jaeger:14268/api/traces

# Log Aggregation
# SGE_LOG_AGGREGATION_ENABLED=true
# SGE_LOG_AGGREGATION_ENDPOINT=http://logstash:5044